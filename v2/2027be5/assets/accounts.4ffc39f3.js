var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&s(e,a,t[a]);return e},i=(e,r)=>t(e,a(r));import{j as c,h as m,R as u,E as d,r as p,s as b,k as y,v as E,ao as f,ap as v,aq as g,ar as C,as as h,at as x,M as O,G as _,J as j,K as k,N as q,O as S,af as w,Q as P}from"./vendor.6d4fafae.js";import{a as z}from"./index.c82f27b2.js";import{F as D}from"./form-item.efb16cfb.js";import"./index.a43d1731.js";import"./index.5a620c89.js";import"./index.esm.bed1302f.js";import"./useTitle.a0256df3.js";const F={name:"",type:"",username:"",password:"",refresh_token:"",access_token:"",root_folder:"",limit:0,order_by:"",order_direction:"",proxy:!1,status:"",search:!1,client_id:"",client_secret:"",zone:"",redirect_uri:"",site_url:"",onedrive_type:"",index:0},G=[{name:"name",label:"name",type:"string",required:!0},{name:"index",label:"index",type:"number",required:!0,description:"for sort"},{name:"order_by",label:"order_by",type:"string",required:!1},{name:"order_direction",label:"order_direction",type:"string",required:!1},{name:"proxy",label:"proxy",type:"bool",required:!1}],I=()=>{const e=c(),{t:t}=m(),[a,r]=u.useState([]),[l,n]=u.useState({}),[s,I]=u.useState(F),[J,K]=u.useState(!1),[L,M]=u.useState(!1),N=d(),Q=()=>{M(!0),z.get("accounts").then((a=>{M(!1);const l=a.data;200!==l.code?e({title:t(l.message),status:"error",duration:3e3,isClosable:!0}):r(l.data)}))};return p.exports.useEffect((()=>{Q(),z.get("drivers").then((a=>{const r=a.data;200!==r.code?e({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):n(r.data)}))}),[]),u.createElement(b,{w:"full"},u.createElement(y,null,u.createElement(E,{onClick:()=>{I(F),K(!1),N.onOpen()}},t("add")),u.createElement(E,{colorScheme:"orange",isLoading:L,onClick:()=>{Q()}},t("refresh"))),u.createElement(b,{overflowX:"auto"},u.createElement(f,{w:"full"},u.createElement(v,null,u.createElement(g,null,u.createElement(C,null,t("name")),u.createElement(C,null,t("type")),u.createElement(C,null,t("root_folder")),u.createElement(C,null,t("index")),u.createElement(C,null,t("status")),u.createElement(C,null,t("operation")))),u.createElement(h,null,a.map((a=>u.createElement(g,{key:a.name},u.createElement(x,null,a.name),u.createElement(x,null,a.type),u.createElement(x,null,a.root_folder),u.createElement(x,null,a.index),u.createElement(x,null,a.status),u.createElement(x,null,u.createElement(E,{onClick:()=>{I(a),K(!0),N.onOpen()}},t("edit")),u.createElement(E,{colorScheme:"red",ml:"1",onClick:()=>{z.delete("account",{params:{name:a.name}}).then((a=>{const r=a.data;200!==r.code?e({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):(e({title:t(r.message),status:"success",duration:3e3,isClosable:!0}),Q())}))}},t("delete"))))))))),u.createElement(O,{isOpen:N.isOpen,onClose:N.onClose,size:"6xl"},u.createElement(_,null),u.createElement(j,null,u.createElement(k,null,t("add")+" / "+t("save")),u.createElement(q,null),u.createElement(S,{pb:6},u.createElement(w,{minChildWidth:"250px",spacing:"2"},u.createElement(D,{type:"select",readOnly:J,required:!0,label:t("type"),value:s.type,values:Object.keys(l),onChange:e=>{I(i(o({},s),{type:e}))}}),G.map((e=>{var t;return u.createElement(D,{key:e.name,type:e.type,label:e.label,value:s[e.name],description:e.description,required:e.required,values:null==(t=e.values)?void 0:t.split(","),onChange:t=>{"bool"!==e.type?I(i(o({},s),{[e.name]:t})):I(i(o({},s),{[e.name]:!s[e.name]}))}})})),s.type&&l[s.type].map((e=>{var t;return u.createElement(D,{key:e.name,type:e.type,label:e.label,value:s[e.name],description:e.description,required:e.required,values:null==(t=e.values)?void 0:t.split(","),onChange:t=>{"bool"!==e.type?I(i(o({},s),{[e.name]:t})):I(i(o({},s),{[e.name]:!s[e.name]}))}})})))),u.createElement(P,null,u.createElement(E,{colorScheme:"blue",mr:3,onClick:()=>{z.post("account",s).then((a=>{const r=a.data;200!==r.code?e({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):(e({title:t(r.message),status:"success",duration:3e3,isClosable:!0}),Q(),N.onClose())}))}},t("save")),u.createElement(E,{onClick:N.onClose},t("cancle"))))))};export{I as default};
